import React, { useState, useEffect } from 'react';
import {
  View, StyleSheet, Pressable, Text, Dimensions, Image, ImageBackground,
} from 'react-native';
import { SvgXml } from 'react-native-svg';
import ModalScreen from '../Components/FreeWrite/ModalScreen';
import Timer from '../Components/FreeWrite/Timer';

const windowHeight = Dimensions.get('window').height;

const background = `<svg width="430" height="700" viewBox="0 0 430 932" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M259.155 -151.966C377.938 -139.561 444.721 -16.8619 536.445 57.5968C627.342 131.384 760.148 173.614 795.594 283.497C831.021 393.32 744.84 501.211 715.518 612.724C685.859 725.516 703.687 857.351 622.263 942.678C539.469 1029.44 407.566 1051.27 286.41 1062.4C171.386 1072.97 57.2469 1050.88 -47.8734 1004.25C-151.081 958.463 -244.728 892.046 -306.381 799.422C-367.24 707.992 -386.911 598.721 -390.278 489.846C-393.656 380.629 -387.249 266.289 -325.695 174.891C-265.004 84.7749 -153.429 49.2454 -57.4015 -4.42191C46.15 -62.294 140.413 -164.367 259.155 -151.966Z" fill="url(#paint0_radial_4205_4347)"/>
<defs>
<radialGradient id="paint0_radial_4205_4347" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(206.5 456) rotate(90) scale(609 597.5)">
<stop stop-color="#CEFF9E" stop-opacity="0.75"/>
<stop offset="0.805629" stop-color="#1872B2"/>
</radialGradient>
</defs>
</svg>`;

const imageIcon = `<svg width="143" height="40" viewBox="0 0 143 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.25" y="0.875" width="142.75" height="39" rx="14" fill="white" fill-opacity="0.2"/>
<g clip-path="url(#clip0_3492_27357)">
<path d="M31.75 26.2083V14.5417C31.75 13.625 31 12.875 30.0833 12.875H18.4167C17.5 12.875 16.75 13.625 16.75 14.5417V26.2083C16.75 27.125 17.5 27.875 18.4167 27.875H30.0833C31 27.875 31.75 27.125 31.75 26.2083ZM21.3333 21.625L23.4167 24.1333L26.3333 20.375L30.0833 25.375H18.4167L21.3333 21.625Z" fill="white"/>
</g>
<path d="M42.8648 14.451H44.4808L50.4968 23.715H50.5288V14.451H51.9688V25.875H50.3048L44.3368 16.707H44.3048V25.875H42.8648V14.451ZM55.1957 21.747C55.1957 22.2483 55.2597 22.6963 55.3877 23.091C55.5264 23.475 55.713 23.8003 55.9477 24.067C56.1824 24.323 56.4544 24.5203 56.7637 24.659C57.0837 24.7977 57.4197 24.867 57.7717 24.867C58.1237 24.867 58.4544 24.7977 58.7637 24.659C59.0837 24.5203 59.361 24.323 59.5957 24.067C59.8304 23.8003 60.0117 23.475 60.1397 23.091C60.2784 22.6963 60.3477 22.2483 60.3477 21.747C60.3477 21.2457 60.2784 20.803 60.1397 20.419C60.0117 20.0243 59.8304 19.6937 59.5957 19.427C59.361 19.1603 59.0837 18.9577 58.7637 18.819C58.4544 18.6803 58.1237 18.611 57.7717 18.611C57.4197 18.611 57.0837 18.6803 56.7637 18.819C56.4544 18.9577 56.1824 19.1603 55.9477 19.427C55.713 19.6937 55.5264 20.0243 55.3877 20.419C55.2597 20.803 55.1957 21.2457 55.1957 21.747ZM53.7557 21.747C53.7557 21.139 53.841 20.5737 54.0117 20.051C54.1824 19.5177 54.4384 19.059 54.7797 18.675C55.121 18.2803 55.5424 17.971 56.0437 17.747C56.545 17.523 57.121 17.411 57.7717 17.411C58.433 17.411 59.009 17.523 59.4997 17.747C60.001 17.971 60.4224 18.2803 60.7637 18.675C61.105 19.059 61.361 19.5177 61.5317 20.051C61.7024 20.5737 61.7877 21.139 61.7877 21.747C61.7877 22.355 61.7024 22.9203 61.5317 23.443C61.361 23.9657 61.105 24.4243 60.7637 24.819C60.4224 25.203 60.001 25.507 59.4997 25.731C59.009 25.9443 58.433 26.051 57.7717 26.051C57.121 26.051 56.545 25.9443 56.0437 25.731C55.5424 25.507 55.121 25.203 54.7797 24.819C54.4384 24.4243 54.1824 23.9657 54.0117 23.443C53.841 22.9203 53.7557 22.355 53.7557 21.747ZM74.6763 17.795C74.591 16.9737 74.2923 16.3817 73.7803 16.019C73.279 15.6457 72.6336 15.459 71.8443 15.459C71.5243 15.459 71.2096 15.491 70.9003 15.555C70.591 15.619 70.3136 15.7257 70.0683 15.875C69.8336 16.0243 69.6416 16.227 69.4923 16.483C69.3536 16.7283 69.2843 17.0377 69.2843 17.411C69.2843 17.763 69.3856 18.051 69.5883 18.275C69.8016 18.4883 70.079 18.6643 70.4203 18.803C70.7723 18.9417 71.167 19.059 71.6043 19.155C72.0416 19.2403 72.4843 19.3363 72.9323 19.443C73.391 19.5497 73.839 19.6777 74.2763 19.827C74.7136 19.9657 75.103 20.1577 75.4443 20.403C75.7963 20.6483 76.0736 20.9577 76.2763 21.331C76.4896 21.7043 76.5963 22.1737 76.5963 22.739C76.5963 23.347 76.4576 23.8697 76.1803 24.307C75.9136 24.7337 75.567 25.0857 75.1403 25.363C74.7136 25.6297 74.2336 25.8217 73.7003 25.939C73.1776 26.067 72.655 26.131 72.1323 26.131C71.4923 26.131 70.8843 26.051 70.3083 25.891C69.743 25.731 69.2416 25.491 68.8043 25.171C68.3776 24.8403 68.0363 24.4243 67.7803 23.923C67.535 23.411 67.4123 22.8083 67.4123 22.115H68.8523C68.8523 22.595 68.943 23.011 69.1243 23.363C69.3163 23.7043 69.5616 23.987 69.8603 24.211C70.1696 24.435 70.527 24.6003 70.9323 24.707C71.3376 24.8137 71.7536 24.867 72.1803 24.867C72.5216 24.867 72.863 24.835 73.2043 24.771C73.5563 24.707 73.871 24.6003 74.1483 24.451C74.4256 24.291 74.6496 24.0777 74.8203 23.811C74.991 23.5443 75.0763 23.203 75.0763 22.787C75.0763 22.3923 74.9696 22.0723 74.7563 21.827C74.5536 21.5817 74.2763 21.3843 73.9243 21.235C73.583 21.075 73.1936 20.947 72.7563 20.851C72.319 20.755 71.871 20.659 71.4123 20.563C70.9643 20.4563 70.5216 20.339 70.0843 20.211C69.647 20.0723 69.2523 19.8963 68.9003 19.683C68.559 19.459 68.2816 19.1763 68.0683 18.835C67.8656 18.483 67.7643 18.0457 67.7643 17.523C67.7643 16.947 67.8816 16.451 68.1163 16.035C68.351 15.6083 68.6603 15.2617 69.0443 14.995C69.439 14.7177 69.8816 14.515 70.3723 14.387C70.8736 14.2483 71.3856 14.179 71.9083 14.179C72.495 14.179 73.039 14.2483 73.5403 14.387C74.0416 14.5257 74.479 14.7443 74.8523 15.043C75.2363 15.3417 75.535 15.7203 75.7483 16.179C75.9723 16.627 76.095 17.1657 76.1163 17.795H74.6763ZM83.8353 20.259C83.7286 19.7363 83.5046 19.331 83.1633 19.043C82.822 18.755 82.3633 18.611 81.7873 18.611C81.2966 18.611 80.886 18.7017 80.5553 18.883C80.2246 19.0643 79.958 19.3043 79.7553 19.603C79.5633 19.9017 79.4246 20.2483 79.3393 20.643C79.254 21.027 79.2113 21.427 79.2113 21.843C79.2113 22.227 79.254 22.6003 79.3393 22.963C79.4353 23.3257 79.5793 23.651 79.7713 23.939C79.9633 24.2163 80.214 24.4403 80.5233 24.611C80.8326 24.7817 81.2006 24.867 81.6273 24.867C82.2993 24.867 82.822 24.691 83.1953 24.339C83.5793 23.987 83.814 23.491 83.8993 22.851H85.2913C85.142 23.875 84.758 24.6643 84.1393 25.219C83.5313 25.7737 82.6993 26.051 81.6433 26.051C81.014 26.051 80.454 25.9497 79.9633 25.747C79.4833 25.5443 79.078 25.2563 78.7473 24.883C78.4273 24.5097 78.182 24.067 78.0113 23.555C77.8513 23.0323 77.7713 22.4617 77.7713 21.843C77.7713 21.2243 77.8513 20.6483 78.0113 20.115C78.1713 19.571 78.4113 19.1017 78.7313 18.707C79.062 18.3017 79.4726 17.987 79.9633 17.763C80.454 17.5283 81.0246 17.411 81.6753 17.411C82.1446 17.411 82.582 17.4697 82.9873 17.587C83.4033 17.6937 83.766 17.8643 84.0753 18.099C84.3953 18.3337 84.6566 18.6323 84.8593 18.995C85.062 19.347 85.19 19.7683 85.2433 20.259H83.8353ZM92.5571 20.947C92.5357 20.627 92.4611 20.323 92.3331 20.035C92.2157 19.747 92.0504 19.5017 91.8371 19.299C91.6344 19.0857 91.3891 18.9203 91.1011 18.803C90.8237 18.675 90.5144 18.611 90.1731 18.611C89.8211 18.611 89.5011 18.675 89.2131 18.803C88.9357 18.9203 88.6957 19.0857 88.4931 19.299C88.2904 19.5123 88.1304 19.763 88.0131 20.051C87.8957 20.3283 87.8264 20.627 87.8051 20.947H92.5571ZM93.8691 23.251C93.6877 24.179 93.2877 24.8777 92.6691 25.347C92.0504 25.8163 91.2717 26.051 90.3331 26.051C89.6717 26.051 89.0957 25.9443 88.6051 25.731C88.1251 25.5177 87.7197 25.219 87.3891 24.835C87.0584 24.451 86.8077 23.9923 86.6371 23.459C86.4771 22.9257 86.3864 22.3443 86.3651 21.715C86.3651 21.0857 86.4611 20.5097 86.6531 19.987C86.8451 19.4643 87.1117 19.011 87.4531 18.627C87.8051 18.243 88.2157 17.9443 88.6851 17.731C89.1651 17.5177 89.6877 17.411 90.2531 17.411C90.9891 17.411 91.5971 17.5657 92.0771 17.875C92.5677 18.1737 92.9571 18.5577 93.2451 19.027C93.5437 19.4963 93.7464 20.0083 93.8531 20.563C93.9704 21.1177 94.0184 21.6457 93.9971 22.147H87.8051C87.7944 22.5097 87.8371 22.8563 87.9331 23.187C88.0291 23.507 88.1837 23.795 88.3971 24.051C88.6104 24.2963 88.8824 24.4937 89.2131 24.643C89.5437 24.7923 89.9331 24.867 90.3811 24.867C90.9571 24.867 91.4264 24.7337 91.7891 24.467C92.1624 24.2003 92.4077 23.795 92.5251 23.251H93.8691ZM95.4068 17.603H96.6868V18.915H96.7188C97.2841 17.9123 98.1801 17.411 99.4068 17.411C99.9508 17.411 100.404 17.4857 100.767 17.635C101.129 17.7843 101.423 17.9923 101.647 18.259C101.871 18.5257 102.025 18.8457 102.111 19.219C102.207 19.5817 102.255 19.987 102.255 20.435V25.875H100.895V20.275C100.895 19.763 100.745 19.3577 100.447 19.059C100.148 18.7603 99.7375 18.611 99.2148 18.611C98.7988 18.611 98.4361 18.675 98.1268 18.803C97.8281 18.931 97.5775 19.1123 97.3748 19.347C97.1721 19.5817 97.0175 19.859 96.9108 20.179C96.8148 20.4883 96.7668 20.8297 96.7668 21.203V25.875H95.4068V17.603ZM110.041 20.947C110.02 20.627 109.945 20.323 109.817 20.035C109.7 19.747 109.535 19.5017 109.321 19.299C109.119 19.0857 108.873 18.9203 108.585 18.803C108.308 18.675 107.999 18.611 107.657 18.611C107.305 18.611 106.985 18.675 106.697 18.803C106.42 18.9203 106.18 19.0857 105.977 19.299C105.775 19.5123 105.615 19.763 105.497 20.051C105.38 20.3283 105.311 20.627 105.289 20.947H110.041ZM111.353 23.251C111.172 24.179 110.772 24.8777 110.153 25.347C109.535 25.8163 108.756 26.051 107.817 26.051C107.156 26.051 106.58 25.9443 106.089 25.731C105.609 25.5177 105.204 25.219 104.873 24.835C104.543 24.451 104.292 23.9923 104.121 23.459C103.961 22.9257 103.871 22.3443 103.849 21.715C103.849 21.0857 103.945 20.5097 104.137 19.987C104.329 19.4643 104.596 19.011 104.937 18.627C105.289 18.243 105.7 17.9443 106.169 17.731C106.649 17.5177 107.172 17.411 107.737 17.411C108.473 17.411 109.081 17.5657 109.561 17.875C110.052 18.1737 110.441 18.5577 110.729 19.027C111.028 19.4963 111.231 20.0083 111.337 20.563C111.455 21.1177 111.503 21.6457 111.481 22.147H105.289C105.279 22.5097 105.321 22.8563 105.417 23.187C105.513 23.507 105.668 23.795 105.881 24.051C106.095 24.2963 106.367 24.4937 106.697 24.643C107.028 24.7923 107.417 24.867 107.865 24.867C108.441 24.867 108.911 24.7337 109.273 24.467C109.647 24.2003 109.892 23.795 110.009 23.251H111.353Z" fill="white"/>
<defs>
<clipPath id="clip0_3492_27357">
<path d="M14.25 20.375C14.25 14.8522 18.7272 10.375 24.25 10.375C29.7728 10.375 34.25 14.8522 34.25 20.375C34.25 25.8978 29.7728 30.375 24.25 30.375C18.7272 30.375 14.25 25.8978 14.25 20.375Z" fill="white"/>
</clipPath>
</defs>
</svg>`;

const timerIcon = `<svg width="46" height="40" viewBox="0 0 46 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.75" y="0.75" width="44.5" height="39.25" rx="14" fill="white" fill-opacity="0.2"/>
<path d="M25.75 10.75H20.25V12.5833H25.75V10.75ZM22.0833 22.6667H23.9167V17.1667H22.0833V22.6667ZM29.4442 16.6075L30.7458 15.3058C30.3517 14.8383 29.9208 14.3983 29.4533 14.0133L28.1517 15.315C26.7308 14.1783 24.9433 13.5 23 13.5C18.4442 13.5 14.75 17.1942 14.75 21.75C14.75 26.3058 18.435 30 23 30C27.565 30 31.25 26.3058 31.25 21.75C31.25 19.8067 30.5717 18.0192 29.4442 16.6075ZM23 28.1667C19.4525 28.1667 16.5833 25.2975 16.5833 21.75C16.5833 18.2025 19.4525 15.3333 23 15.3333C26.5475 15.3333 29.4167 18.2025 29.4167 21.75C29.4167 25.2975 26.5475 28.1667 23 28.1667Z" fill="white"/>
</svg>`;

const musicIcon = `<svg width="143" height="40" viewBox="0 0 143 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect y="0.875" width="142.75" height="39" rx="14" fill="white" fill-opacity="0.2"/>
<path d="M27.2656 12.8808L19.0156 14.0035C18.2656 14.0795 17.75 14.752 17.75 15.5004V23.1954C17.4043 23.134 17.0293 23.134 16.625 23.2188C15.2012 23.593 14 24.8472 14 26.119C14 27.3908 15.2012 28.1539 16.625 27.7796C18.0488 27.4054 19.25 26.1278 19.25 24.856V18.424L27.5 17.3247V22.4002C27.1543 22.3388 26.7793 22.3651 26.375 22.4703C24.9512 22.8446 23.75 24.0988 23.75 25.3706C23.75 26.6423 24.9512 27.4054 26.375 27.0312C27.7988 26.657 29 25.3793 29 24.1076V14.3777C29 13.4802 28.165 12.8048 27.2656 12.8808Z" fill="white"/>
<path d="M44.232 14.451H45.848L51.864 23.715H51.896V14.451H53.336V25.875H51.672L45.704 16.707H45.672V25.875H44.232V14.451ZM56.5629 21.747C56.5629 22.2483 56.6269 22.6963 56.7549 23.091C56.8935 23.475 57.0802 23.8003 57.3149 24.067C57.5495 24.323 57.8215 24.5203 58.1309 24.659C58.4509 24.7977 58.7869 24.867 59.1389 24.867C59.4909 24.867 59.8215 24.7977 60.1309 24.659C60.4509 24.5203 60.7282 24.323 60.9629 24.067C61.1975 23.8003 61.3789 23.475 61.5069 23.091C61.6455 22.6963 61.7149 22.2483 61.7149 21.747C61.7149 21.2457 61.6455 20.803 61.5069 20.419C61.3789 20.0243 61.1975 19.6937 60.9629 19.427C60.7282 19.1603 60.4509 18.9577 60.1309 18.819C59.8215 18.6803 59.4909 18.611 59.1389 18.611C58.7869 18.611 58.4509 18.6803 58.1309 18.819C57.8215 18.9577 57.5495 19.1603 57.3149 19.427C57.0802 19.6937 56.8935 20.0243 56.7549 20.419C56.6269 20.803 56.5629 21.2457 56.5629 21.747ZM55.1229 21.747C55.1229 21.139 55.2082 20.5737 55.3789 20.051C55.5495 19.5177 55.8055 19.059 56.1469 18.675C56.4882 18.2803 56.9095 17.971 57.4109 17.747C57.9122 17.523 58.4882 17.411 59.1389 17.411C59.8002 17.411 60.3762 17.523 60.8669 17.747C61.3682 17.971 61.7895 18.2803 62.1309 18.675C62.4722 19.059 62.7282 19.5177 62.8989 20.051C63.0695 20.5737 63.1549 21.139 63.1549 21.747C63.1549 22.355 63.0695 22.9203 62.8989 23.443C62.7282 23.9657 62.4722 24.4243 62.1309 24.819C61.7895 25.203 61.3682 25.507 60.8669 25.731C60.3762 25.9443 59.8002 26.051 59.1389 26.051C58.4882 26.051 57.9122 25.9443 57.4109 25.731C56.9095 25.507 56.4882 25.203 56.1469 24.819C55.8055 24.4243 55.5495 23.9657 55.3789 23.443C55.2082 22.9203 55.1229 22.355 55.1229 21.747ZM69.4675 14.451H71.5475L75.1475 24.051L78.7635 14.451H80.8435V25.875H79.4035V16.371H79.3715L75.8035 25.875H74.5075L70.9395 16.371H70.9075V25.875H69.4675V14.451ZM89.997 25.875H88.717V24.563H88.685C88.397 25.075 88.029 25.4537 87.581 25.699C87.133 25.9337 86.605 26.051 85.997 26.051C85.453 26.051 84.9997 25.9817 84.637 25.843C84.2743 25.6937 83.981 25.4857 83.757 25.219C83.533 24.9523 83.373 24.6377 83.277 24.275C83.1917 23.9017 83.149 23.491 83.149 23.043V17.603H84.509V23.203C84.509 23.715 84.6583 24.1203 84.957 24.419C85.2557 24.7177 85.6663 24.867 86.189 24.867C86.605 24.867 86.9623 24.803 87.261 24.675C87.5703 24.547 87.8263 24.3657 88.029 24.131C88.2317 23.8963 88.381 23.6243 88.477 23.315C88.5837 22.995 88.637 22.6483 88.637 22.275V17.603H89.997V25.875ZM92.8716 23.267C92.8823 23.5657 92.9516 23.8217 93.0796 24.035C93.2076 24.2377 93.373 24.403 93.5756 24.531C93.789 24.6483 94.0236 24.7337 94.2796 24.787C94.5463 24.8403 94.8183 24.867 95.0956 24.867C95.309 24.867 95.533 24.851 95.7676 24.819C96.0023 24.787 96.2156 24.7283 96.4076 24.643C96.6103 24.5577 96.7756 24.435 96.9036 24.275C97.0316 24.1043 97.0956 23.891 97.0956 23.635C97.0956 23.283 96.9623 23.0163 96.6956 22.835C96.429 22.6537 96.093 22.5097 95.6876 22.403C95.293 22.2857 94.861 22.1843 94.3916 22.099C93.9223 22.003 93.485 21.875 93.0796 21.715C92.685 21.5443 92.3543 21.3097 92.0876 21.011C91.821 20.7123 91.6876 20.2963 91.6876 19.763C91.6876 19.347 91.7783 18.9897 91.9596 18.691C92.1516 18.3923 92.3916 18.1523 92.6796 17.971C92.9783 17.779 93.309 17.6403 93.6716 17.555C94.045 17.459 94.413 17.411 94.7756 17.411C95.245 17.411 95.677 17.4537 96.0716 17.539C96.4663 17.6137 96.813 17.7523 97.1116 17.955C97.421 18.147 97.6663 18.4137 97.8476 18.755C98.029 19.0857 98.1356 19.5017 98.1676 20.003H96.8076C96.7863 19.7363 96.717 19.5177 96.5996 19.347C96.4823 19.1657 96.333 19.0217 96.1516 18.915C95.9703 18.8083 95.7676 18.7337 95.5436 18.691C95.3303 18.6377 95.1116 18.611 94.8876 18.611C94.685 18.611 94.477 18.627 94.2636 18.659C94.061 18.691 93.8743 18.7497 93.7036 18.835C93.533 18.9097 93.3943 19.0163 93.2876 19.155C93.181 19.283 93.1276 19.4537 93.1276 19.667C93.1276 19.9017 93.2076 20.099 93.3676 20.259C93.5383 20.4083 93.7516 20.5363 94.0076 20.643C94.2636 20.739 94.5516 20.8243 94.8716 20.899C95.1916 20.963 95.5116 21.0323 95.8316 21.107C96.173 21.1817 96.5036 21.2723 96.8236 21.379C97.1543 21.4857 97.4423 21.6297 97.6876 21.811C97.9436 21.9817 98.1463 22.2003 98.2956 22.467C98.4556 22.7337 98.5356 23.0643 98.5356 23.459C98.5356 23.9603 98.429 24.3763 98.2156 24.707C98.013 25.0377 97.741 25.3043 97.3996 25.507C97.069 25.7097 96.6903 25.8483 96.2636 25.923C95.8476 26.0083 95.4316 26.051 95.0156 26.051C94.557 26.051 94.1196 26.003 93.7036 25.907C93.2876 25.811 92.9196 25.6563 92.5996 25.443C92.2796 25.219 92.0236 24.931 91.8316 24.579C91.6396 24.2163 91.533 23.779 91.5116 23.267H92.8716ZM101.48 16.115H100.12V14.451H101.48V16.115ZM100.12 17.603H101.48V25.875H100.12V17.603ZM109.203 20.259C109.096 19.7363 108.872 19.331 108.531 19.043C108.189 18.755 107.731 18.611 107.155 18.611C106.664 18.611 106.253 18.7017 105.923 18.883C105.592 19.0643 105.325 19.3043 105.123 19.603C104.931 19.9017 104.792 20.2483 104.707 20.643C104.621 21.027 104.579 21.427 104.579 21.843C104.579 22.227 104.621 22.6003 104.707 22.963C104.803 23.3257 104.947 23.651 105.139 23.939C105.331 24.2163 105.581 24.4403 105.891 24.611C106.2 24.7817 106.568 24.867 106.995 24.867C107.667 24.867 108.189 24.691 108.563 24.339C108.947 23.987 109.181 23.491 109.267 22.851H110.659C110.509 23.875 110.125 24.6643 109.507 25.219C108.899 25.7737 108.067 26.051 107.011 26.051C106.381 26.051 105.821 25.9497 105.331 25.747C104.851 25.5443 104.445 25.2563 104.115 24.883C103.795 24.5097 103.549 24.067 103.379 23.555C103.219 23.0323 103.139 22.4617 103.139 21.843C103.139 21.2243 103.219 20.6483 103.379 20.115C103.539 19.571 103.779 19.1017 104.099 18.707C104.429 18.3017 104.84 17.987 105.331 17.763C105.821 17.5283 106.392 17.411 107.043 17.411C107.512 17.411 107.949 17.4697 108.355 17.587C108.771 17.6937 109.133 17.8643 109.443 18.099C109.763 18.3337 110.024 18.6323 110.227 18.995C110.429 19.347 110.557 19.7683 110.611 20.259H109.203Z" fill="white"/>
</svg>`;

const imageModalIcon = `<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26 23.1111L26 2.88888C26 1.3 24.7 -4.31868e-06 23.1111 -4.04087e-06L2.88889 -5.05109e-07C1.3 -2.27299e-07 2.27299e-07 1.3 5.05109e-07 2.88889L4.04088e-06 23.1111C4.31869e-06 24.7 1.3 26 2.88889 26L23.1111 26C24.7 26 26 24.7 26 23.1111ZM7.94445 15.1667L11.5556 19.5144L16.6111 13L23.1111 21.6667L2.88889 21.6667L7.94445 15.1667Z" fill="white"/>
</svg>`;

const musicModalIcon = `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M28.3 0.0124543L10.7 2.40749C9.1 2.56965 8 4.00418 8 5.60087V22.0168C7.2625 21.8859 6.4625 21.8859 5.6 22.0667C2.5625 22.8651 0 25.5408 0 28.2539C0 30.967 2.5625 32.5949 5.6 31.7966C8.6375 30.9982 11.2 28.2726 11.2 25.5595V11.8379L28.8 9.4928V20.3204C28.0625 20.1894 27.2625 20.2455 26.4 20.47C23.3625 21.2684 20.8 23.9441 20.8 26.6572C20.8 29.3703 23.3625 30.9982 26.4 30.1999C29.4375 29.4015 32 26.6759 32 23.9628V3.20583C32 1.29105 30.2188 -0.149709 28.3 0.0124543Z" fill="white"/>
</svg>`;

const selectedTimerIcon = `<svg width="46" height="40" viewBox="0 0 46 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="0.75" y="0.75" width="44.5" height="39.25" rx="14" fill="white"/>
<path d="M25.75 10.75H20.25V12.5833H25.75V10.75ZM22.0833 22.6667H23.9167V17.1667H22.0833V22.6667ZM29.4442 16.6075L30.7458 15.3058C30.3517 14.8383 29.9208 14.3983 29.4533 14.0133L28.1517 15.315C26.7308 14.1783 24.9433 13.5 23 13.5C18.4442 13.5 14.75 17.1942 14.75 21.75C14.75 26.3058 18.435 30 23 30C27.565 30 31.25 26.3058 31.25 21.75C31.25 19.8067 30.5717 18.0192 29.4442 16.6075ZM23 28.1667C19.4525 28.1667 16.5833 25.2975 16.5833 21.75C16.5833 18.2025 19.4525 15.3333 23 15.3333C26.5475 15.3333 29.4167 18.2025 29.4167 21.75C29.4167 25.2975 26.5475 28.1667 23 28.1667Z" fill="#404040"/>
</svg>`;

const styles = StyleSheet.create({
  container: {
    // flex: 1,
    // position: 'relative',
    // marginTop: 'auto',
    // flexDirection: 'row',
    // justifyContent: 'center',

    // borderColor: 'blue',
    // borderWidth: 2,
    // borderStyle: 'dotted',
  },
  icons: {
    // flex: 1,
    // position: 'absolute',
    height: windowHeight * 0.08,
    top: windowHeight * 0.52,
    flexDirection: 'row',
    justifyContent: 'space-around',
    zIndex: 0,

    borderColor: 'purple',
    borderWidth: 2,
    borderStyle: 'dotted',
  },
  svg: {
    // position: 'absolute',
    ...StyleSheet.absoluteFill,
    zIndex: -1,
    borderColor: 'black',
    borderWidth: 2,
    borderStyle: 'dotted',
  },
  title: {
    fontSize: 50,
    fontWeight: 'bold',
    color: 'white',
    padding: 10,
  },
  text: {
    color: 'white',
    fontSize: 20,
    fontWeight: 'normal',
    // padding: 10,
  },
  imageBackground: {
    flex: 1,
  },
});

export default function FreeWriteScreen() {
  // const [isOpen, setIsOpen] = useState(false);
  const [isMusicOpen, setIsMusicOpen] = useState(false);
  const [isImageOpen, setIsImageOpen] = useState(false);
  // const songTitle = 'Gentle River Stream';
  const artist = 'Joji';
  const photographer = 'Bob';
  const [timerPressed, setTimerPressed] = useState(false);
  const [backgroundImage, setBackgroundImage] = useState(require('../assets/free-write-icons/background.jpg'));

  const handlePress = () => {
    setTimerPressed(!timerPressed);
  };

  const changeScene = (message) => {
    console.log('message is: ', message);
    setBackgroundImage(message);
  };

  // useEffect(() => {
  //   // Perform any additional logic here, if needed
  //   console.log('Background image changed:', backgroundImage);
  // }, [backgroundImage]);

  return (
    <ImageBackground
      source={backgroundImage}
      style={styles.imageBackground}
    >
      <View style={styles.container}>
        {/* <SvgXml xml={background} style={styles.svg} /> */}
        <Text style={{ ...(timerPressed ? { ...styles.title, fontSize: 20, alignSelf: 'center' } : styles.title) }}>
          FreeWrite
          {'\n'}
          {timerPressed ? null : <Text style={styles.text}>This is your zone, to let your creativity run free</Text>}
        </Text>

        <View style={styles.icons}>
          <ModalScreen icon={musicIcon} name="Music" modalIcon={musicModalIcon} isMusicOpen={isMusicOpen} setIsMusicOpen={setIsMusicOpen} creator={artist} />
          {!isMusicOpen ? (
            <>
              <Pressable onPress={handlePress}>
                {timerPressed ? <SvgXml xml={selectedTimerIcon} /> : <SvgXml xml={timerIcon} />}
                {timerPressed && <Timer /> }
              </Pressable>
              <ModalScreen icon={imageIcon} name="Scene" modalIcon={imageModalIcon} isImageOpen={isImageOpen} setIsImageOpen={setIsImageOpen} creator={photographer} changeBackground={changeScene} />
            </>
          ) : null}
        </View>
      </View>
    </ImageBackground>
  );
}
