import React, { useState, useEffect } from 'react';
import {
  View, StyleSheet, Pressable, Text, Dimensions, Image, ImageBackground,
} from 'react-native';
import { SvgXml } from 'react-native-svg';
import ModalScreen from '../Components/FreeWrite/ModalScreen';
import Timer from '../Components/FreeWrite/Timer';

const windowHeight = Dimensions.get('window').height;

const background = `<svg width="430" height="700" viewBox="0 0 430 932" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M259.155 -151.966C377.938 -139.561 444.721 -16.8619 536.445 57.5968C627.342 131.384 760.148 173.614 795.594 283.497C831.021 393.32 744.84 501.211 715.518 612.724C685.859 725.516 703.687 857.351 622.263 942.678C539.469 1029.44 407.566 1051.27 286.41 1062.4C171.386 1072.97 57.2469 1050.88 -47.8734 1004.25C-151.081 958.463 -244.728 892.046 -306.381 799.422C-367.24 707.992 -386.911 598.721 -390.278 489.846C-393.656 380.629 -387.249 266.289 -325.695 174.891C-265.004 84.7749 -153.429 49.2454 -57.4015 -4.42191C46.15 -62.294 140.413 -164.367 259.155 -151.966Z" fill="url(#paint0_radial_4205_4347)"/>
<defs>
<radialGradient id="paint0_radial_4205_4347" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(206.5 456) rotate(90) scale(609 597.5)">
<stop stop-color="#CEFF9E" stop-opacity="0.75"/>
<stop offset="0.805629" stop-color="#1872B2"/>
</radialGradient>
</defs>
</svg>`;

const imageIcon = `<svg width="145" height="50" viewBox="0 0 145 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="145" height="50" rx="14" fill="white" fill-opacity="0.2"/>
<rect x="0.5" y="0.5" width="144" height="49" rx="13.5" stroke="white" stroke-opacity="0.5"/>
<g clip-path="url(#clip0_4773_8561)">
<path d="M27.5909 18L23.6705 23.8333L26.65 28.2667L24.9773 29.6667C23.2105 27.0417 20.2727 22.6667 20.2727 22.6667L14 32H37L27.5909 18Z" fill="white"/>
</g>
<g clip-path="url(#clip1_4773_8561)">
<path d="M50.2941 25.78H54.1661L52.2621 20.452H52.2301L50.2941 25.78ZM51.4301 19.076H53.1101L57.5741 30.5H55.8941L54.6461 27.06H49.8141L48.5341 30.5H46.9821L51.4301 19.076ZM59.4691 26.436C59.4691 26.82 59.5171 27.1987 59.6131 27.572C59.7198 27.9347 59.8745 28.26 60.0771 28.548C60.2905 28.836 60.5571 29.0653 60.8771 29.236C61.2078 29.4067 61.5918 29.492 62.0291 29.492C62.4878 29.492 62.8771 29.4013 63.1971 29.22C63.5171 29.0387 63.7785 28.804 63.9811 28.516C64.1838 28.2173 64.3278 27.8813 64.4131 27.508C64.5091 27.1347 64.5571 26.756 64.5571 26.372C64.5571 25.9667 64.5091 25.5773 64.4131 25.204C64.3171 24.82 64.1625 24.484 63.9491 24.196C63.7465 23.908 63.4798 23.6787 63.1491 23.508C62.8185 23.3267 62.4185 23.236 61.9491 23.236C61.4905 23.236 61.1011 23.3267 60.7811 23.508C60.4611 23.6893 60.2051 23.9293 60.0131 24.228C59.8211 24.5267 59.6825 24.868 59.5971 25.252C59.5118 25.636 59.4691 26.0307 59.4691 26.436ZM65.8691 30.5H64.5091V29.38H64.4771C64.2531 29.8387 63.9011 30.1693 63.4211 30.372C62.9411 30.5747 62.4131 30.676 61.8371 30.676C61.1971 30.676 60.6371 30.5587 60.1571 30.324C59.6878 30.0893 59.2931 29.7747 58.9731 29.38C58.6638 28.9853 58.4291 28.5267 58.2691 28.004C58.1091 27.4813 58.0291 26.9267 58.0291 26.34C58.0291 25.7533 58.1038 25.1987 58.2531 24.676C58.4131 24.1533 58.6478 23.7 58.9571 23.316C59.2771 22.9213 59.6718 22.612 60.1411 22.388C60.6211 22.1533 61.1758 22.036 61.8051 22.036C62.0185 22.036 62.2478 22.0573 62.4931 22.1C62.7385 22.1427 62.9838 22.2173 63.2291 22.324C63.4745 22.42 63.7038 22.5533 63.9171 22.724C64.1411 22.884 64.3278 23.0867 64.4771 23.332H64.5091V19.076H65.8691V30.5ZM68.9535 26.436C68.9535 26.82 69.0015 27.1987 69.0975 27.572C69.2042 27.9347 69.3588 28.26 69.5615 28.548C69.7748 28.836 70.0415 29.0653 70.3615 29.236C70.6922 29.4067 71.0762 29.492 71.5135 29.492C71.9722 29.492 72.3615 29.4013 72.6815 29.22C73.0015 29.0387 73.2628 28.804 73.4655 28.516C73.6682 28.2173 73.8122 27.8813 73.8975 27.508C73.9935 27.1347 74.0415 26.756 74.0415 26.372C74.0415 25.9667 73.9935 25.5773 73.8975 25.204C73.8015 24.82 73.6468 24.484 73.4335 24.196C73.2308 23.908 72.9642 23.6787 72.6335 23.508C72.3028 23.3267 71.9028 23.236 71.4335 23.236C70.9748 23.236 70.5855 23.3267 70.2655 23.508C69.9455 23.6893 69.6895 23.9293 69.4975 24.228C69.3055 24.5267 69.1668 24.868 69.0815 25.252C68.9962 25.636 68.9535 26.0307 68.9535 26.436ZM75.3535 30.5H73.9935V29.38H73.9615C73.7375 29.8387 73.3855 30.1693 72.9055 30.372C72.4255 30.5747 71.8975 30.676 71.3215 30.676C70.6815 30.676 70.1215 30.5587 69.6415 30.324C69.1722 30.0893 68.7775 29.7747 68.4575 29.38C68.1482 28.9853 67.9135 28.5267 67.7535 28.004C67.5935 27.4813 67.5135 26.9267 67.5135 26.34C67.5135 25.7533 67.5882 25.1987 67.7375 24.676C67.8975 24.1533 68.1322 23.7 68.4415 23.316C68.7615 22.9213 69.1562 22.612 69.6255 22.388C70.1055 22.1533 70.6602 22.036 71.2895 22.036C71.5028 22.036 71.7322 22.0573 71.9775 22.1C72.2228 22.1427 72.4682 22.2173 72.7135 22.324C72.9588 22.42 73.1882 22.5533 73.4015 22.724C73.6255 22.884 73.8122 23.0867 73.9615 23.332H73.9935V19.076H75.3535V30.5ZM88.731 22.42C88.6457 21.5987 88.347 21.0067 87.835 20.644C87.3337 20.2707 86.6883 20.084 85.899 20.084C85.579 20.084 85.2643 20.116 84.955 20.18C84.6457 20.244 84.3683 20.3507 84.123 20.5C83.8883 20.6493 83.6963 20.852 83.547 21.108C83.4083 21.3533 83.339 21.6627 83.339 22.036C83.339 22.388 83.4403 22.676 83.643 22.9C83.8563 23.1133 84.1337 23.2893 84.475 23.428C84.827 23.5667 85.2217 23.684 85.659 23.78C86.0963 23.8653 86.539 23.9613 86.987 24.068C87.4457 24.1747 87.8937 24.3027 88.331 24.452C88.7683 24.5907 89.1577 24.7827 89.499 25.028C89.851 25.2733 90.1283 25.5827 90.331 25.956C90.5443 26.3293 90.651 26.7987 90.651 27.364C90.651 27.972 90.5123 28.4947 90.235 28.932C89.9683 29.3587 89.6217 29.7107 89.195 29.988C88.7683 30.2547 88.2883 30.4467 87.755 30.564C87.2323 30.692 86.7097 30.756 86.187 30.756C85.547 30.756 84.939 30.676 84.363 30.516C83.7977 30.356 83.2963 30.116 82.859 29.796C82.4323 29.4653 82.091 29.0493 81.835 28.548C81.5897 28.036 81.467 27.4333 81.467 26.74H82.907C82.907 27.22 82.9977 27.636 83.179 27.988C83.371 28.3293 83.6163 28.612 83.915 28.836C84.2243 29.06 84.5817 29.2253 84.987 29.332C85.3923 29.4387 85.8083 29.492 86.235 29.492C86.5763 29.492 86.9177 29.46 87.259 29.396C87.611 29.332 87.9257 29.2253 88.203 29.076C88.4803 28.916 88.7043 28.7027 88.875 28.436C89.0457 28.1693 89.131 27.828 89.131 27.412C89.131 27.0173 89.0243 26.6973 88.811 26.452C88.6083 26.2067 88.331 26.0093 87.979 25.86C87.6377 25.7 87.2483 25.572 86.811 25.476C86.3737 25.38 85.9257 25.284 85.467 25.188C85.019 25.0813 84.5763 24.964 84.139 24.836C83.7017 24.6973 83.307 24.5213 82.955 24.308C82.6137 24.084 82.3363 23.8013 82.123 23.46C81.9203 23.108 81.819 22.6707 81.819 22.148C81.819 21.572 81.9363 21.076 82.171 20.66C82.4057 20.2333 82.715 19.8867 83.099 19.62C83.4937 19.3427 83.9363 19.14 84.427 19.012C84.9283 18.8733 85.4403 18.804 85.963 18.804C86.5497 18.804 87.0937 18.8733 87.595 19.012C88.0963 19.1507 88.5337 19.3693 88.907 19.668C89.291 19.9667 89.5897 20.3453 89.803 20.804C90.027 21.252 90.1497 21.7907 90.171 22.42H88.731ZM97.89 24.884C97.7833 24.3613 97.5593 23.956 97.218 23.668C96.8767 23.38 96.418 23.236 95.842 23.236C95.3513 23.236 94.9407 23.3267 94.61 23.508C94.2793 23.6893 94.0127 23.9293 93.81 24.228C93.618 24.5267 93.4793 24.8733 93.394 25.268C93.3087 25.652 93.266 26.052 93.266 26.468C93.266 26.852 93.3087 27.2253 93.394 27.588C93.49 27.9507 93.634 28.276 93.826 28.564C94.018 28.8413 94.2687 29.0653 94.578 29.236C94.8873 29.4067 95.2553 29.492 95.682 29.492C96.354 29.492 96.8767 29.316 97.25 28.964C97.634 28.612 97.8687 28.116 97.954 27.476H99.346C99.1967 28.5 98.8127 29.2893 98.194 29.844C97.586 30.3987 96.754 30.676 95.698 30.676C95.0687 30.676 94.5087 30.5747 94.018 30.372C93.538 30.1693 93.1327 29.8813 92.802 29.508C92.482 29.1347 92.2367 28.692 92.066 28.18C91.906 27.6573 91.826 27.0867 91.826 26.468C91.826 25.8493 91.906 25.2733 92.066 24.74C92.226 24.196 92.466 23.7267 92.786 23.332C93.1167 22.9267 93.5273 22.612 94.018 22.388C94.5087 22.1533 95.0793 22.036 95.73 22.036C96.1993 22.036 96.6367 22.0947 97.042 22.212C97.458 22.3187 97.8207 22.4893 98.13 22.724C98.45 22.9587 98.7113 23.2573 98.914 23.62C99.1167 23.972 99.2447 24.3933 99.298 24.884H97.89ZM106.612 25.572C106.59 25.252 106.516 24.948 106.388 24.66C106.27 24.372 106.105 24.1267 105.892 23.924C105.689 23.7107 105.444 23.5453 105.156 23.428C104.878 23.3 104.569 23.236 104.228 23.236C103.876 23.236 103.556 23.3 103.268 23.428C102.99 23.5453 102.75 23.7107 102.548 23.924C102.345 24.1373 102.185 24.388 102.068 24.676C101.95 24.9533 101.881 25.252 101.86 25.572H106.612ZM107.924 27.876C107.742 28.804 107.342 29.5027 106.724 29.972C106.105 30.4413 105.326 30.676 104.388 30.676C103.726 30.676 103.15 30.5693 102.66 30.356C102.18 30.1427 101.774 29.844 101.444 29.46C101.113 29.076 100.862 28.6173 100.692 28.084C100.532 27.5507 100.441 26.9693 100.42 26.34C100.42 25.7107 100.516 25.1347 100.708 24.612C100.9 24.0893 101.166 23.636 101.508 23.252C101.86 22.868 102.27 22.5693 102.74 22.356C103.22 22.1427 103.742 22.036 104.308 22.036C105.044 22.036 105.652 22.1907 106.132 22.5C106.622 22.7987 107.012 23.1827 107.3 23.652C107.598 24.1213 107.801 24.6333 107.908 25.188C108.025 25.7427 108.073 26.2707 108.052 26.772H101.86C101.849 27.1347 101.892 27.4813 101.988 27.812C102.084 28.132 102.238 28.42 102.452 28.676C102.665 28.9213 102.937 29.1187 103.268 29.268C103.598 29.4173 103.988 29.492 104.436 29.492C105.012 29.492 105.481 29.3587 105.844 29.092C106.217 28.8253 106.462 28.42 106.58 27.876H107.924ZM109.462 22.228H110.742V23.54H110.774C111.339 22.5373 112.235 22.036 113.462 22.036C114.006 22.036 114.459 22.1107 114.822 22.26C115.184 22.4093 115.478 22.6173 115.702 22.884C115.926 23.1507 116.08 23.4707 116.166 23.844C116.262 24.2067 116.31 24.612 116.31 25.06V30.5H114.95V24.9C114.95 24.388 114.8 23.9827 114.502 23.684C114.203 23.3853 113.792 23.236 113.27 23.236C112.854 23.236 112.491 23.3 112.182 23.428C111.883 23.556 111.632 23.7373 111.43 23.972C111.227 24.2067 111.072 24.484 110.966 24.804C110.87 25.1133 110.822 25.4547 110.822 25.828V30.5H109.462V22.228ZM124.096 25.572C124.075 25.252 124 24.948 123.872 24.66C123.755 24.372 123.589 24.1267 123.376 23.924C123.173 23.7107 122.928 23.5453 122.64 23.428C122.363 23.3 122.053 23.236 121.712 23.236C121.36 23.236 121.04 23.3 120.752 23.428C120.475 23.5453 120.235 23.7107 120.032 23.924C119.829 24.1373 119.669 24.388 119.552 24.676C119.435 24.9533 119.365 25.252 119.344 25.572H124.096ZM125.408 27.876C125.227 28.804 124.827 29.5027 124.208 29.972C123.589 30.4413 122.811 30.676 121.872 30.676C121.211 30.676 120.635 30.5693 120.144 30.356C119.664 30.1427 119.259 29.844 118.928 29.46C118.597 29.076 118.347 28.6173 118.176 28.084C118.016 27.5507 117.925 26.9693 117.904 26.34C117.904 25.7107 118 25.1347 118.192 24.612C118.384 24.0893 118.651 23.636 118.992 23.252C119.344 22.868 119.755 22.5693 120.224 22.356C120.704 22.1427 121.227 22.036 121.792 22.036C122.528 22.036 123.136 22.1907 123.616 22.5C124.107 22.7987 124.496 23.1827 124.784 23.652C125.083 24.1213 125.285 24.6333 125.392 25.188C125.509 25.7427 125.557 26.2707 125.536 26.772H119.344C119.333 27.1347 119.376 27.4813 119.472 27.812C119.568 28.132 119.723 28.42 119.936 28.676C120.149 28.9213 120.421 29.1187 120.752 29.268C121.083 29.4173 121.472 29.492 121.92 29.492C122.496 29.492 122.965 29.3587 123.328 29.092C123.701 28.8253 123.947 28.42 124.064 27.876H125.408Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_4773_8561">
<path d="M14 25C14 21.134 17.134 18 21 18H30C33.866 18 37 21.134 37 25C37 28.866 33.866 32 30 32H21C17.134 32 14 28.866 14 25Z" fill="white"/>
</clipPath>
<clipPath id="clip1_4773_8561">
<rect width="84" height="39" fill="white" transform="translate(47 5.5)"/>
</clipPath>
</defs>
</svg>`;

const timerIcon = `<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="50" height="50" rx="14" fill="white" fill-opacity="0.2"/>
<rect x="0.5" y="0.5" width="49" height="49" rx="13.5" stroke="white" stroke-opacity="0.5"/>
<path d="M27.75 15.375H22.25V17.2083H27.75V15.375ZM24.0833 27.2917H25.9167V21.7917H24.0833V27.2917ZM31.4442 21.2325L32.7458 19.9308C32.3517 19.4633 31.9208 19.0233 31.4533 18.6383L30.1517 19.94C28.7308 18.8033 26.9433 18.125 25 18.125C20.4442 18.125 16.75 21.8192 16.75 26.375C16.75 30.9308 20.435 34.625 25 34.625C29.565 34.625 33.25 30.9308 33.25 26.375C33.25 24.4317 32.5717 22.6442 31.4442 21.2325ZM25 32.7917C21.4525 32.7917 18.5833 29.9225 18.5833 26.375C18.5833 22.8275 21.4525 19.9583 25 19.9583C28.5475 19.9583 31.4167 22.8275 31.4167 26.375C31.4167 29.9225 28.5475 32.7917 25 32.7917Z" fill="white"/>
</svg>`;

const musicIcon = `<svg width="145" height="50" viewBox="0 0 145 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="145" height="50" rx="14" fill="white" fill-opacity="0.2"/>
<rect x="0.5" y="0.5" width="144" height="49" rx="13.5" stroke="white" stroke-opacity="0.5"/>
<path d="M27.2656 17.5058L19.0156 18.6285C18.2656 18.7045 17.75 19.377 17.75 20.1254V27.8204C17.4043 27.759 17.0293 27.759 16.625 27.8438C15.2012 28.218 14 29.4722 14 30.744C14 32.0158 15.2012 32.7789 16.625 32.4046C18.0488 32.0304 19.25 30.7528 19.25 29.481V23.049L27.5 21.9497V27.0252C27.1543 26.9638 26.7793 26.9901 26.375 27.0953C24.9512 27.4696 23.75 28.7238 23.75 29.9956C23.75 31.2673 24.9512 32.0304 26.375 31.6562C27.7988 31.282 29 30.0043 29 28.7326V19.0027C29 18.1052 28.165 17.4298 27.2656 17.5058Z" fill="white"/>
<g clip-path="url(#clip0_4773_8559)">
<path d="M42.216 25.78H46.088L44.184 20.452H44.152L42.216 25.78ZM43.352 19.076H45.032L49.496 30.5H47.816L46.568 27.06H41.736L40.456 30.5H38.904L43.352 19.076ZM51.391 26.436C51.391 26.82 51.439 27.1987 51.535 27.572C51.6417 27.9347 51.7963 28.26 51.999 28.548C52.2123 28.836 52.479 29.0653 52.799 29.236C53.1297 29.4067 53.5137 29.492 53.951 29.492C54.4097 29.492 54.799 29.4013 55.119 29.22C55.439 29.0387 55.7003 28.804 55.903 28.516C56.1057 28.2173 56.2497 27.8813 56.335 27.508C56.431 27.1347 56.479 26.756 56.479 26.372C56.479 25.9667 56.431 25.5773 56.335 25.204C56.239 24.82 56.0843 24.484 55.871 24.196C55.6683 23.908 55.4017 23.6787 55.071 23.508C54.7403 23.3267 54.3403 23.236 53.871 23.236C53.4123 23.236 53.023 23.3267 52.703 23.508C52.383 23.6893 52.127 23.9293 51.935 24.228C51.743 24.5267 51.6043 24.868 51.519 25.252C51.4337 25.636 51.391 26.0307 51.391 26.436ZM57.791 30.5H56.431V29.38H56.399C56.175 29.8387 55.823 30.1693 55.343 30.372C54.863 30.5747 54.335 30.676 53.759 30.676C53.119 30.676 52.559 30.5587 52.079 30.324C51.6097 30.0893 51.215 29.7747 50.895 29.38C50.5857 28.9853 50.351 28.5267 50.191 28.004C50.031 27.4813 49.951 26.9267 49.951 26.34C49.951 25.7533 50.0257 25.1987 50.175 24.676C50.335 24.1533 50.5697 23.7 50.879 23.316C51.199 22.9213 51.5937 22.612 52.063 22.388C52.543 22.1533 53.0977 22.036 53.727 22.036C53.9403 22.036 54.1697 22.0573 54.415 22.1C54.6603 22.1427 54.9057 22.2173 55.151 22.324C55.3963 22.42 55.6257 22.5533 55.839 22.724C56.063 22.884 56.2497 23.0867 56.399 23.332H56.431V19.076H57.791V30.5ZM60.8754 26.436C60.8754 26.82 60.9234 27.1987 61.0194 27.572C61.126 27.9347 61.2807 28.26 61.4834 28.548C61.6967 28.836 61.9634 29.0653 62.2834 29.236C62.614 29.4067 62.998 29.492 63.4354 29.492C63.894 29.492 64.2834 29.4013 64.6034 29.22C64.9234 29.0387 65.1847 28.804 65.3874 28.516C65.59 28.2173 65.734 27.8813 65.8194 27.508C65.9154 27.1347 65.9634 26.756 65.9634 26.372C65.9634 25.9667 65.9154 25.5773 65.8194 25.204C65.7234 24.82 65.5687 24.484 65.3554 24.196C65.1527 23.908 64.886 23.6787 64.5554 23.508C64.2247 23.3267 63.8247 23.236 63.3554 23.236C62.8967 23.236 62.5074 23.3267 62.1874 23.508C61.8674 23.6893 61.6114 23.9293 61.4194 24.228C61.2274 24.5267 61.0887 24.868 61.0034 25.252C60.918 25.636 60.8754 26.0307 60.8754 26.436ZM67.2754 30.5H65.9154V29.38H65.8834C65.6594 29.8387 65.3074 30.1693 64.8274 30.372C64.3474 30.5747 63.8194 30.676 63.2434 30.676C62.6034 30.676 62.0434 30.5587 61.5634 30.324C61.094 30.0893 60.6994 29.7747 60.3794 29.38C60.07 28.9853 59.8354 28.5267 59.6754 28.004C59.5154 27.4813 59.4354 26.9267 59.4354 26.34C59.4354 25.7533 59.51 25.1987 59.6594 24.676C59.8194 24.1533 60.054 23.7 60.3634 23.316C60.6834 22.9213 61.078 22.612 61.5474 22.388C62.0274 22.1533 62.582 22.036 63.2114 22.036C63.4247 22.036 63.654 22.0573 63.8994 22.1C64.1447 22.1427 64.39 22.2173 64.6354 22.324C64.8807 22.42 65.11 22.5533 65.3234 22.724C65.5474 22.884 65.734 23.0867 65.8834 23.332H65.9154V19.076H67.2754V30.5ZM76.0129 25.78H79.8849L77.9809 20.452H77.9489L76.0129 25.78ZM77.1489 19.076H78.8289L83.2929 30.5H81.6129L80.3649 27.06H75.5329L74.2529 30.5H72.7009L77.1489 19.076ZM91.0439 30.5H89.7639V29.188H89.7319C89.4439 29.7 89.0759 30.0787 88.6279 30.324C88.1799 30.5587 87.6519 30.676 87.0439 30.676C86.4999 30.676 86.0465 30.6067 85.6839 30.468C85.3212 30.3187 85.0279 30.1107 84.8039 29.844C84.5799 29.5773 84.4199 29.2627 84.3239 28.9C84.2385 28.5267 84.1959 28.116 84.1959 27.668V22.228H85.5559V27.828C85.5559 28.34 85.7052 28.7453 86.0039 29.044C86.3025 29.3427 86.7132 29.492 87.2359 29.492C87.6519 29.492 88.0092 29.428 88.3079 29.3C88.6172 29.172 88.8732 28.9907 89.0759 28.756C89.2785 28.5213 89.4279 28.2493 89.5239 27.94C89.6305 27.62 89.6839 27.2733 89.6839 26.9V22.228H91.0439V30.5ZM94.0785 26.436C94.0785 26.82 94.1265 27.1987 94.2225 27.572C94.3292 27.9347 94.4838 28.26 94.6865 28.548C94.8998 28.836 95.1665 29.0653 95.4865 29.236C95.8172 29.4067 96.2012 29.492 96.6385 29.492C97.0972 29.492 97.4865 29.4013 97.8065 29.22C98.1265 29.0387 98.3878 28.804 98.5905 28.516C98.7932 28.2173 98.9372 27.8813 99.0225 27.508C99.1185 27.1347 99.1665 26.756 99.1665 26.372C99.1665 25.9667 99.1185 25.5773 99.0225 25.204C98.9265 24.82 98.7718 24.484 98.5585 24.196C98.3558 23.908 98.0892 23.6787 97.7585 23.508C97.4278 23.3267 97.0278 23.236 96.5585 23.236C96.0998 23.236 95.7105 23.3267 95.3905 23.508C95.0705 23.6893 94.8145 23.9293 94.6225 24.228C94.4305 24.5267 94.2918 24.868 94.2065 25.252C94.1212 25.636 94.0785 26.0307 94.0785 26.436ZM100.479 30.5H99.1185V29.38H99.0865C98.8625 29.8387 98.5105 30.1693 98.0305 30.372C97.5505 30.5747 97.0225 30.676 96.4465 30.676C95.8065 30.676 95.2465 30.5587 94.7665 30.324C94.2972 30.0893 93.9025 29.7747 93.5825 29.38C93.2732 28.9853 93.0385 28.5267 92.8785 28.004C92.7185 27.4813 92.6385 26.9267 92.6385 26.34C92.6385 25.7533 92.7132 25.1987 92.8625 24.676C93.0225 24.1533 93.2572 23.7 93.5665 23.316C93.8865 22.9213 94.2812 22.612 94.7505 22.388C95.2305 22.1533 95.7852 22.036 96.4145 22.036C96.6278 22.036 96.8572 22.0573 97.1025 22.1C97.3478 22.1427 97.5932 22.2173 97.8385 22.324C98.0838 22.42 98.3132 22.5533 98.5265 22.724C98.7505 22.884 98.9372 23.0867 99.0865 23.332H99.1185V19.076H100.479V30.5ZM104.011 20.74H102.651V19.076H104.011V20.74ZM102.651 22.228H104.011V30.5H102.651V22.228ZM107.11 26.372C107.11 26.8733 107.174 27.3213 107.302 27.716C107.44 28.1 107.627 28.4253 107.862 28.692C108.096 28.948 108.368 29.1453 108.678 29.284C108.998 29.4227 109.334 29.492 109.686 29.492C110.038 29.492 110.368 29.4227 110.678 29.284C110.998 29.1453 111.275 28.948 111.51 28.692C111.744 28.4253 111.926 28.1 112.054 27.716C112.192 27.3213 112.262 26.8733 112.262 26.372C112.262 25.8707 112.192 25.428 112.054 25.044C111.926 24.6493 111.744 24.3187 111.51 24.052C111.275 23.7853 110.998 23.5827 110.678 23.444C110.368 23.3053 110.038 23.236 109.686 23.236C109.334 23.236 108.998 23.3053 108.678 23.444C108.368 23.5827 108.096 23.7853 107.862 24.052C107.627 24.3187 107.44 24.6493 107.302 25.044C107.174 25.428 107.11 25.8707 107.11 26.372ZM105.67 26.372C105.67 25.764 105.755 25.1987 105.926 24.676C106.096 24.1427 106.352 23.684 106.694 23.3C107.035 22.9053 107.456 22.596 107.958 22.372C108.459 22.148 109.035 22.036 109.686 22.036C110.347 22.036 110.923 22.148 111.414 22.372C111.915 22.596 112.336 22.9053 112.678 23.3C113.019 23.684 113.275 24.1427 113.446 24.676C113.616 25.1987 113.702 25.764 113.702 26.372C113.702 26.98 113.616 27.5453 113.446 28.068C113.275 28.5907 113.019 29.0493 112.678 29.444C112.336 29.828 111.915 30.132 111.414 30.356C110.923 30.5693 110.347 30.676 109.686 30.676C109.035 30.676 108.459 30.5693 107.958 30.356C107.456 30.132 107.035 29.828 106.694 29.444C106.352 29.0493 106.096 28.5907 105.926 28.068C105.755 27.5453 105.67 26.98 105.67 26.372Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_4773_8559">
<rect width="92" height="39" fill="white" transform="translate(39 5.5)"/>
</clipPath>
</defs>
</svg>`;

const imageModalIcon = `<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26 23.1111L26 2.88888C26 1.3 24.7 -4.31868e-06 23.1111 -4.04087e-06L2.88889 -5.05109e-07C1.3 -2.27299e-07 2.27299e-07 1.3 5.05109e-07 2.88889L4.04088e-06 23.1111C4.31869e-06 24.7 1.3 26 2.88889 26L23.1111 26C24.7 26 26 24.7 26 23.1111ZM7.94445 15.1667L11.5556 19.5144L16.6111 13L23.1111 21.6667L2.88889 21.6667L7.94445 15.1667Z" fill="white"/>
</svg>`;

const musicModalIcon = `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M28.3 0.0124543L10.7 2.40749C9.1 2.56965 8 4.00418 8 5.60087V22.0168C7.2625 21.8859 6.4625 21.8859 5.6 22.0667C2.5625 22.8651 0 25.5408 0 28.2539C0 30.967 2.5625 32.5949 5.6 31.7966C8.6375 30.9982 11.2 28.2726 11.2 25.5595V11.8379L28.8 9.4928V20.3204C28.0625 20.1894 27.2625 20.2455 26.4 20.47C23.3625 21.2684 20.8 23.9441 20.8 26.6572C20.8 29.3703 23.3625 30.9982 26.4 30.1999C29.4375 29.4015 32 26.6759 32 23.9628V3.20583C32 1.29105 30.2188 -0.149709 28.3 0.0124543Z" fill="white"/>
</svg>`;

const selectedTimerIcon = `<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="50" height="50" rx="14" fill="#F1F1F1"/>
<rect x="0.5" y="0.5" width="49" height="49" rx="13.5" stroke="white" stroke-opacity="0.5"/>
<path d="M27.75 15.375H22.25V17.2083H27.75V15.375ZM24.0833 27.2917H25.9167V21.7917H24.0833V27.2917ZM31.4442 21.2325L32.7458 19.9308C32.3517 19.4633 31.9208 19.0233 31.4533 18.6383L30.1517 19.94C28.7308 18.8033 26.9433 18.125 25 18.125C20.4442 18.125 16.75 21.8192 16.75 26.375C16.75 30.9308 20.435 34.625 25 34.625C29.565 34.625 33.25 30.9308 33.25 26.375C33.25 24.4317 32.5717 22.6442 31.4442 21.2325ZM25 32.7917C21.4525 32.7917 18.5833 29.9225 18.5833 26.375C18.5833 22.8275 21.4525 19.9583 25 19.9583C28.5475 19.9583 31.4167 22.8275 31.4167 26.375C31.4167 29.9225 28.5475 32.7917 25 32.7917Z" fill="#353535"/>
</svg>`;

const styles = StyleSheet.create({
  container: {
    // flex: 1,
    // position: 'relative',
    // marginTop: 'auto',
    // flexDirection: 'row',
    // justifyContent: 'center',

    // borderColor: 'blue',
    // borderWidth: 2,
    // borderStyle: 'dotted',
  },
  icons: {
    // flex: 1,
    position: 'absolute',
    top: windowHeight * 0.67,
    flexDirection: 'row',
    justifyContent: 'space-around',
    zIndex: 1,
    width: '100%',

    borderColor: 'pink',
    borderWidth: 2,
    borderStyle: 'dotted',
  },
  svg: {
    // position: 'absolute',
    ...StyleSheet.absoluteFill,
    zIndex: -1,
    borderColor: 'black',
    borderWidth: 2,
    borderStyle: 'dotted',
  },
  title: {
    fontSize: 50,
    fontWeight: 'bold',
    color: 'white',
    padding: 10,
  },
  text: {
    color: 'white',
    fontSize: 20,
    fontWeight: 'normal',
    // padding: 10,
  },
  imageBackground: {
    flex: 1,
  },
});

export default function FreeWriteScreen() {
  // const [isOpen, setIsOpen] = useState(false);
  const [isMusicOpen, setIsMusicOpen] = useState(false);
  const [isImageOpen, setIsImageOpen] = useState(false);
  // const songTitle = 'Gentle River Stream';
  const artist = 'Joji';
  const photographer = 'Bob';
  const [timerPressed, setTimerPressed] = useState(false);
  const [backgroundImage, setBackgroundImage] = useState(require('../assets/free-write-icons/background.jpg'));

  const handlePress = () => {
    setTimerPressed(!timerPressed);
  };

  const changeScene = (message) => {
    console.log('message is: ', message);
    setBackgroundImage(message);
  };

  return (
    <ImageBackground
      source={backgroundImage}
      style={styles.imageBackground}
    >
      <View style={styles.container}>
        {/* <SvgXml xml={background} style={styles.svg} /> */}
        <Text style={{ ...(timerPressed ? { ...styles.title, fontSize: 20, alignSelf: 'center' } : styles.title) }}>
          FreeWrite
          {'\n'}
          {timerPressed ? null : <Text style={styles.text}>This is your zone, to let your creativity run free</Text>}
        </Text>

        <View style={styles.icons}>
          <ModalScreen icon={musicIcon} name="Music" modalIcon={musicModalIcon} isMusicOpen={isMusicOpen} setIsMusicOpen={setIsMusicOpen} creator={artist} />
          {!isImageOpen && !isMusicOpen ? (
            <Pressable onPress={handlePress}>
              {timerPressed ? <SvgXml xml={selectedTimerIcon} /> : <SvgXml xml={timerIcon} />}
              {timerPressed && <Timer /> }
            </Pressable>
          ) : null}
          {!isMusicOpen ? (
            <ModalScreen icon={imageIcon} name="Scene" modalIcon={imageModalIcon} isImageOpen={isImageOpen} setIsImageOpen={setIsImageOpen} creator={photographer} changeBackground={changeScene} />
          ) : null}
        </View>
      </View>
    </ImageBackground>
  );
}
